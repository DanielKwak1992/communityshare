<div cs-main-view has-permission="{{(!(Session.activeUser === undefined))}}">
  <h4>Settings</h4>
  <div class="row">
    <form novalidate
          action="" role="form" name="settingsForm" class="form-horizontal">
      <div class="form-group">
        <label for="name"
               class="control-label cs-form-label">Name</label>
        <div class="cs-form-control">
          <input ng-model="editedUser.name"
                 type="text"
                 required
                 name="name"
                 id="name"
                 class="form-control"/>
          <p ng-show="settingsForm.name.$invalid && !settingsForm.name.$pristine" class="help-block">
            A name is required.
          </p>
        </div>
      </div>
      <div class="form-group">
        <label for="email"
               class="control-label cs-form-label">Email</label>
        <div class="cs-form-control">
          <input ng-model="editedUser.email"
                 disabled
                 name="email"
                 id="email"
                 class="form-control"
                 type="text"/>
        </div>
      </div>

      <div cs-institutions institutions="editedUser.institutions">
      </div>      

    </form>
  </div>

  <div ng-if="Session.activeUser.is_community_partner"
       cs-community-partner-settings
       user="Session.activeUser"
       methods="communityPartnerSettingsMethods"
       form="properties.partnerSettingsForm"
       ></div>
  
  <div class="row">
    <div class="alert alert-success cs-form-message" ng-show="successMessage">
      {{successMessage}}
    </div>
    <div class="alert alert-danger cs-form-message" ng-show="errorMessage">
      {{errorMessage}}
    </div>
  </div>
  
  <div class="row">
    <button class="btn cs-form-button"
            ng-disabled="settingsForm.$invalid || (Session.activeUser.is_community_partner && properties.partnerSettingsForm.$invalid)"
            ng-click="saveSettings()">
      Save Changes
    </button>
  </div>
  
</div>
